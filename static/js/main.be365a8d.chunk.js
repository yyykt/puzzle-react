(this.webpackJsonppuzzle=this.webpackJsonppuzzle||[]).push([[0],{14:function(n,e,t){n.exports=t.p+"static/media/bg.eed40435.jpg"},19:function(n,e,t){n.exports=t(28)},24:function(n,e,t){},25:function(n,e,t){},28:function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r),a=t(12),i=t.n(a),c=(t(24),t(25),t(1)),u=t(2),l=t(4),d=t(3),f={I:[[1,1,1,1]],J:[[1,0,0],[1,1,1]],L:[[0,0,1],[1,1,1]],O:[[1,1],[1,1]],S:[[0,1,1],[1,1,0]],T:[[0,1,0],[1,1,1]],Z:[[1,1,0],[0,1,1]]},p={I:{shape:{0:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],1:[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],2:[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],3:[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]},color:"0, 255, 255"},J:{shape:{0:[[1,0,0],[1,1,1],[0,0,0]],1:[[0,1,1],[0,1,0],[0,1,0]],2:[[0,0,0],[1,1,1],[0,0,1]],3:[[0,1,0],[0,1,0],[1,1,0]]},color:"0, 0, 255"},L:{shape:{0:[[0,0,1],[1,1,1],[0,0,0]],1:[[0,1,0],[0,1,0],[0,1,1]],2:[[0,0,0],[1,1,1],[1,0,0]],3:[[1,1,0],[0,1,0],[0,1,0]]},color:"255, 165, 0"},O:{shape:{0:[[0,1,1,0],[0,1,1,0],[0,0,0,0]],1:[[0,1,1,0],[0,1,1,0],[0,0,0,0]],2:[[0,1,1,0],[0,1,1,0],[0,0,0,0]],3:[[0,1,1,0],[0,1,1,0],[0,0,0,0]]},color:"255, 255, 0 "},S:{shape:{0:[[0,1,1],[1,1,0],[0,0,0]],1:[[0,1,0],[0,1,1],[0,0,1]],2:[[0,0,0],[0,1,1],[1,1,0]],3:[[1,0,0],[1,1,0],[0,1,0]]},color:"0, 255, 0"},T:{shape:{0:[[0,1,0],[1,1,1],[0,0,0]],1:[[0,1,0],[0,1,1],[0,1,0]],2:[[0,0,0],[1,1,1],[0,1,0]],3:[[0,1,0],[1,1,0],[0,1,0]]},color:"128, 0, 128"},Z:{shape:{0:[[1,1,0],[0,1,1],[0,0,0]],1:[[0,0,1],[0,1,1],[0,1,0]],2:[[0,0,0],[1,1,0],[0,1,1]],3:[[0,1,0],[1,1,0],[1,0,0]]},color:"255, 0, 0"}},b=function(){return Array.from(Array(40),(function(){return Array.from(Array(10),(function(){return"empty"}))}))},s=function(n,e){return p[n.minoType].shape[n.rotation].every((function(t,r){return t.every((function(t,o){return 0===t||function(){var t=n.pos.x+o,a=n.pos.y-r;return t>=0&&t<10&&a>=0&&a<40&&"empty"===e[a][t]}()}))}))},m=function(n,e,t,r){var o=n.pos,a=o.x,i=o.y,c=Object(l.a)(Object(l.a)({},n),{},{pos:{x:a+t,y:i+r}}),u=s(c,e);return{succeed:u,updatedMino:u?c:n}},v=function(n,e){for(var t=!0,r=n;t;){var o=m(r,e,0,-1);t=o.succeed,r=o.updatedMino}return r},g=function(n,e){return 0===n?"R"===e?1:3:1===n?"R"===e?2:0:2===n?"R"===e?3:1:"R"===e?0:2},h=function(n){return{minoType:n,pos:{x:Math.floor(5)-2,y:21},rotation:0}},x=function(n,e){var t=Array.from(e,(function(n){return Array.from(n)}));return p[n.minoType].shape[n.rotation].forEach((function(e,r){return e.forEach((function(e,o){e&&(t[n.pos.y-r][n.pos.x+o]=n.minoType)}))})),t},y=function(n){var e=Array.from(n,(function(n){return Array.from(n)})),t=e.findIndex((function(n){return n.every((function(n){return"empty"!==n}))}));return-1===t?{deleted:0,updatedField:n}:(e.splice(t,1),e.push(Array.from(Array(10),(function(){return"empty"}))),{deleted:1,updatedField:e})},O=function(n,e){var t=n.slice(0,21).map((function(n){return n.map((function(n){return"empty"===n?{type:"empty"}:{type:"fixedBlock",minoType:n}}))})),r=function(n,e){var r=n.pos,o=r.x,a=r.y;p[n.minoType].shape[n.rotation].forEach((function(r,i){return r.forEach((function(r,c){r&&a-i<21&&(t[a-i][o+c]={type:e,minoType:n.minoType,axis:function(){if(1===c&&1===i&&"activeMino"===e&&"I"!==n.minoType&&"O"!==n.minoType)return"center"}()})}))})),"I"===n.minoType&&"activeMino"===e&&(1===n.rotation||2===n.rotation?o+1>=0&&o+1<10&&a-1>=0&&(t[a-1][o+1].axis="lowerRight"):o+2>=0&&o+2<10&&a-2>=0&&(t[a-2][o+2].axis="upperLeft"))};e&&(r(v(e,n),"ghost"),r(e,"activeMino"));return t},j=t(13),E=t(18),w=["I","J","L","O","S","T","Z"],T=function(){var n=Object(r.useState)(Array.from(Array(6),(function(){return null}))),e=Object(d.a)(n,2),t=e[0],o=e[1],a=Object(r.useState)(null),i=Object(d.a)(a,2),c=i[0],u=i[1],l=Object(r.useState)(!1),f=Object(d.a)(l,2),p=f[0],b=f[1],s=Object(r.useRef)([].concat(w)),m=function(){0===s.current.length&&(s.current=[].concat(w));var n=Math.floor(Math.random()*s.current.length),e=s.current[n];return s.current.splice(n,1),e};return{next:t,getNext:function(){var n=Object(E.a)(t),e=n.shift();if(b(!1),e)return n.push(m()),o(n),e;throw new Error("Invalid call of getNext().")},resetMinoGenerator:function(){s.current=[].concat(w);var n=Array.from(Array(6),(function(){return m()}));o(n),u(null)},hold:c,execHold:function(n){return!p&&(u(n),b(!0),!0)}}},k=function(){var n=Object(r.useState)(null),e=Object(d.a)(n,2),t=e[0],o=e[1],a=Object(r.useState)(b()),i=Object(d.a)(a,2),c=i[0],u=i[1],f=Object(r.useState)(!1),p=Object(d.a)(f,2),m=p[0],O=p[1],E=Object(r.useState)(0),w=Object(d.a)(E,2),k=w[0],M=w[1],A=Object(r.useState)(0),z=Object(d.a)(A,2),S=z[0],F=z[1],I=T(),L=I.next,R=I.getNext,B=I.resetMinoGenerator,G=I.hold,D=I.execHold,J=function(n){if(t){var e=s(n,c);return e&&o(n),e}return!1},N=function(n){var e=h(n);return s(e,c)?(o(e),!0):(O(!0),!1)},C=Object(j.a)((function(){N(R()),F(0)}),1e3),H=C.start;C.clear;return{game:{mino:t,field:c,gameOver:m,lineCleared:k},startGame:function(){u(b()),o(null),O(!1),M(0),B(),H()},shiftMino:function(n){return!!t&&J(Object(l.a)(Object(l.a)({},t),{},{pos:{x:t.pos.x+n,y:t.pos.y}}))},dropMino:function(){return!!t&&J(Object(l.a)(Object(l.a)({},t),{},{pos:{x:t.pos.x,y:t.pos.y-1}}))},rotateMino:function(n){return!!t&&J(Object(l.a)(Object(l.a)({},t),{},{rotation:g(t.rotation,n)}))},resetMino:N,placeMino:function(){if(t){var n=x(t,c);u(n),o(null)}},hardDropMino:function(){if(t){var n=v(t,c),e=x(n,c),r=h(R());s(r,e)?o(r):O(!0);var a=function(n){var e=0,t=y(n),r=t.deleted,o=t.updatedField;for(e+=r;r;){var a=y(o);r=a.deleted,o=a.updatedField,e+=r}return{count:e,updatedField:o}}(e),i=a.count,l=a.updatedField;u(l),M(k+i)}},timer:S,setTimer:F,next:L,hold:G,holdMino:function(){t&&(D(t.minoType)&&N(G||R()))}}},M=t(8),A=t(14),z=t.n(A);function S(){var n=Object(c.a)(["\n  width: 10px;\n  height: 10px;\n  border: 3px solid white;\n  border-radius: 50%;\n  box-sizing: border-box;\n  margin: auto;\n  /* vertical-align: middle; */\n  top: ",";\n  left: ",";\n  position: absolute;\n"]);return S=function(){return n},n}function F(){var n=Object(c.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n"]);return F=function(){return n},n}var I=u.b.div(F()),L={center:"calc((100% - ".concat("10px",") / 2)"),lowerRight:"calc(100% - ".concat("10px"," / 2)"),upperLeft:"calc(-".concat("10px"," / 2)")},R=u.b.div(S(),(function(n){return L[n.pos]}),(function(n){return L[n.pos]})),B=function(n){var e=n.pos;return o.a.createElement(I,null,o.a.createElement(R,{pos:e}))};function G(){var n=Object(c.a)(["\n      border: 1px inset #777;\n    "]);return G=function(){return n},n}function D(){var n=Object(c.a)([""]);return D=function(){return n},n}function J(){var n=Object(c.a)(["\n        background: rgba(",", 0.8);\n        border: 2px outset;\n        border-color: rgba(",", 0.8);\n      "]);return J=function(){return n},n}function N(){var n=Object(c.a)(["\n        background: rgba(",", 0.2);\n        border: 6px outset;\n        border-color: rgba(",", 0.2);\n      "]);return N=function(){return n},n}function C(){var n=Object(c.a)(["\n        background: rgba(",", 0.8);\n        border: 6px outset;\n        border-color: rgba(",", 0.8);\n      "]);return C=function(){return n},n}function H(){var n=Object(c.a)(["\n  box-sizing: border-box;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  ",";\n"]);return H=function(){return n},n}function Z(){var n=Object(c.a)(["\n  position: relative;\n\n  &::before {\n    display: block;\n    padding: ",";\n    content: '';\n  }\n"]);return Z=function(){return n},n}var P=u.b.div(Z(),(function(n){return n.cutoff?"20% 0":"50% 0"})),W=u.b.div(H(),(function(n){if(("fixedBlock"===n.type||"activeMino"===n.type)&&n.minoType){var e=p[n.minoType].color;return Object(u.a)(C(),e,e)}if("ghost"===n.type&&n.minoType){var t=p[n.minoType].color;return Object(u.a)(N(),t,t)}if("preview"===n.type&&n.minoType){var r=p[n.minoType].color;return Object(u.a)(J(),r,r)}return"previewBg"===n.type?Object(u.a)(D()):Object(u.a)(G())})),K=function(n){var e=n.type,t=n.minoType,r=n.cutoff,a=n.axis;return o.a.createElement(P,{cutoff:r},o.a.createElement(W,{type:e,minoType:t,cutoff:r},a?o.a.createElement(B,{pos:a}):o.a.createElement("div",null)))};function X(){var n=Object(c.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  /* margin: 0 0 20px 0; */\n  padding: ",";\n  border: ",";\n  border-radius: 10px;\n  width: 100%;\n  height: 50px;\n  font-size: 0.8em;\n  background: ",";\n"]);return X=function(){return n},n}var $=u.b.div(X(),(function(n){return n.padding}),(function(n){return n.border}),(function(n){return n.background}));$.defaultProps={background:"#FFF",border:"4px solid black",padding:"5%"};var q=$;function Q(){var n=Object(c.a)(["\n  display: grid;\n  grid-template-columns: repeat(",", 1fr);\n  /* grid-template-rows: 3; */\n  grid-gap: 1px;\n  /* border: 4px solid #fff; */\n  box-sizing: border-box;\n  width: 80%;\n  margin: auto;\n"]);return Q=function(){return n},n}var U=u.b.div(Q(),(function(n){return n.width})),V=function(n){var e=n.minoType;if(null===e)return o.a.createElement(q,{background:"black",border:"4px solid white"});var t=f[e],r=[t[0].length,t.length],a=r[0],i=r[1],c="O"===e?"5% 20%":"I"===e?"5% 0%":"5% 5%";return o.a.createElement(q,{padding:c,background:"black",border:"4px solid white"},o.a.createElement(U,{width:a,height:i},t.map((function(n){return n.map((function(n){return n?o.a.createElement(K,{type:"preview",minoType:e}):o.a.createElement(K,{type:"previewBg"})}))}))))};function Y(){var n=Object(c.a)(["\n  display: block;\n  padding: 0;\n"]);return Y=function(){return n},n}var _=Object(r.memo)(V),nn=u.b.div(Y()),en=function(n){var e=n.next;return o.a.createElement(nn,null,o.a.createElement(q,null,"NEXT"),e.map((function(n,e){return o.a.createElement(_,{minoType:n})})))};function tn(){var n=Object(c.a)(["\n  display: block;\n  padding: 0;\n"]);return tn=function(){return n},n}var rn=Object(r.memo)(V),on=u.b.div(tn()),an=function(n){var e=n.hold;return o.a.createElement(on,null,o.a.createElement(q,null,"HOLD"),o.a.createElement(rn,{minoType:e}))};function cn(){var n=Object(c.a)(["\n  display: grid;\n  grid-template-columns: repeat(",", 1fr);\n  grid-gap: 1px;\n  border: 4px solid #fff;\n  box-sizing: border-box;\n  width: 100%;\n  background: #557;\n"]);return cn=function(){return n},n}var un=Object(r.memo)(K),ln=u.b.div(cn(),(function(n){return n.width})),dn=function(n){var e=n.stage,t=e[0].length,r=e.length;return o.a.createElement(ln,{width:t,height:r},e.reverse().map((function(n,e){return n.map((function(n,t){var r=n.type,a=n.minoType,i=n.axis;return o.a.createElement(un,{type:r,minoType:a,axis:i,cutoff:0===e})}))})))};function fn(){var n=Object(c.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  border: 4px solid #333;\n  border-radius: 20px;\n  background: #fff;\n  width: 100%;\n  font-size: 0.8em;\n"]);return fn=function(){return n},n}var pn=u.b.div(fn()),bn=function(n){n.gameOver;var e=n.text;return o.a.createElement(pn,null,e)};function sn(){var n=Object(c.a)(["\n  box-sizing: border-box;\n  background: #fff;\n  min-height: 40px;\n  width: 100%;\n  cursor: pointer;\n"]);return sn=function(){return n},n}var mn=u.b.button(sn()),vn=function(n){var e=n.callback;return o.a.createElement(mn,{onClick:e},"Start Game")};function gn(){var n=Object(c.a)(["\n  /* width: 100%; */\n  /* height: 100%; */\n  background: url(",");\n  background-size: cover;\n  overflow: hidden;\n\n  display: flex;\n  align-items: flex-start;\n  padding: 40px;\n  margin: 0 auto;\n  max-width: 600px;\n\n  aside {\n    width: 30%;\n    max-width: 150px;\n    display: block;\n    padding: 0 20px;\n  }\n"]);return gn=function(){return n},n}var hn=39,xn=37,yn=88,On=90,jn=40,En=32,wn=67,Tn=u.b.div(gn(),z.a),kn=function(){var n=k(),e=n.game,t=n.startGame,r=n.shiftMino,a=n.dropMino,i=n.rotateMino,c=n.hardDropMino,u=n.timer,l=n.setTimer,d=n.next,f=n.hold,p=n.holdMino,b=e.mino,s=e.field,m=e.gameOver,v=e.lineCleared;return Object(M.a)((function(){return a()}),1e3),Object(M.a)((function(){return l(u+1)}),1e3),o.a.createElement("div",{tabIndex:0,role:"button",onKeyDown:function(n){n.preventDefault(),function(n){var e=n.keyCode;e===xn?r(-1):e===hn?r(1):e===jn?a():e===On?i("L"):e===yn?i("R"):e===En?c():e===wn&&p()}(n)}},o.a.createElement(Tn,null,o.a.createElement("aside",null,o.a.createElement(an,{hold:f})),o.a.createElement(dn,{stage:O(s,b)}),o.a.createElement("aside",null,o.a.createElement(en,{next:d})),o.a.createElement("aside",null,m?o.a.createElement(bn,{text:"Game Over"}):o.a.createElement("div",null,o.a.createElement(bn,{text:"Time: ".concat(u)}),o.a.createElement(bn,{text:"Lines: ".concat(v)}),o.a.createElement(bn,{text:"LPM: ".concat(u&&(v/u*60).toFixed(3))})),o.a.createElement(vn,{callback:t}))))},Mn=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(kn,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Mn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.be365a8d.chunk.js.map